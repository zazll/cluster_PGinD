# cluster_PGinD

Отказоустойчивый кластер PostgreSQL на базе Patroni, etcd и HAProxy. Все разворачивается в Docker, конфигурация вынесена в переменные окружения. Простое решение для стабильной работы базы данных.

## Компоненты
- **Patroni**: управление конфигурацией и автоматическое переключение лидера.
- **etcd**: распределенное хранилище для состояния кластера.
- **HAProxy**: балансировщик для доступа к мастер-узлу (порт 5000).

## Быстрый старт

1. Подготовьте файл окружения:
   ```bash
   cp .env.example .env
   ```
2. Укажите IP-адреса серверов и имена нод в `.env`. Внутри файла есть пояснения к параметрам.
3. Запустите кластер:
   ```bash
   docker compose up -d
   ```

## Подключение
Используйте порт 5000 на любом из серверов. HAProxy сам определит текущего мастера и направит запрос на запись.

## Управление
Посмотреть текущий статус всех узлов:
```bash
docker exec -it patroni patronictl -c /home/postgres/.config/patroni/patronictl.yaml list
```

---
Надеюсь, эта сборка сэкономит вам время. Если проект помог — буду рад звезде на репозитории. Всем добра и стабильных коннектов!
